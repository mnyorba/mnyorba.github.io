---
// Component Imports
import { type CollectionEntry, getCollection } from "astro:content";

// Layout Imports
import BaseLayout from "../../layouts/BaseLayout.astro";

interface Props {
	entry: CollectionEntry<"blog">;
}

// This is a dynamic route that generates a page for every Markdown file in src/content/
// Read more about dynamic routes and this `getStaticPaths` function in the Astro docs:
// https://docs.astro.build/en/core-concepts/routing/#dynamic-routes
export async function getStaticPaths() {
	const blog = await getCollection("blog");
	return blog.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<!-- <Debug {blog } /> -->
<BaseLayout title={entry.data.title} description={entry.data.description}>
	<h2>{entry.data.title}</h2>
	<article class="container">
		<div class="shadow-xl p-4">
			<div class="grid grid-cols-12">
				<div
					class="col-start-1 col-end-13 md:col-end-10 order-2 md:order-1 px-2"
				>
					<div class="float-left mr-6">
						<div
							class="relative aspect-w-4 aspect-h-5 sm:aspect-w-16 sm:aspect-h-9 w-full sm:w-72 lg:w-[32rem]"
						>
							{
								entry.data.img && (
									<img
										src={entry.data.img}
										alt={entry.data.img_alt || ""}
										class="float-start"
									/>
								)
							}
						</div>
					</div>
					<Content />
				</div>
				<aside
					class="col-start-1 md:col-start-10 col-end-13 order-1 md:order-2 bg-slate-100 px-2"
				>
					<div class="sticky top-0">
						<h2>TOC</h2>
					</div>
				</aside>
			</div>
		</div>
	</article>
</BaseLayout>
